<?xml version="1.0" encoding="UTF-8"?>
<Patch>

  <Operation Class="XmlExtensions.FindMod">
    <mods>
      <li>ferny.categoriesdropdowns</li>
      <li>koberiddle.categoriesdropdownsextended</li>
    </mods>
    <packageId>True</packageId>
    <logic>and</logic>
    <caseTrue>

      <Operation Class="XmlExtensions.OptionalPatch">
        <modId>Rhynia.Mod.Misc</modId>
        <key>Misc_GroupingTweak</key>
        <defaultValue>False</defaultValue>
        <caseTrue>

          <!-- Tiny Workbenches -->

          <Operation Class="XmlExtensions.FindMod">
            <mods>
              <li>mlie.tinyworkbenchs</li>
            </mods>
            <packageId>True</packageId>
            <caseTrue>

              <Operation Class="XmlExtensions.CreateDocument">
                <docName>MiniWorkbench</docName>
                <xpath>/Defs/ThingDef[@ParentName = 'TWB_MiniBenchBase']</xpath>
              </Operation>

              <Operation Class="XmlExtensions.ApplyInDocument">
                <docName>MiniWorkbench</docName>
                <apply>

                  <!-- <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_TableSculptingMini']</xpath>
                    <value>
                      <designatorDropdown>Grouped_Smithy</designatorDropdown>
                    </value>
                  </Operation> -->

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_TableMachiningMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_MachiningTables</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_TableButcherMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_ButcheringBenches</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_HandTailoringBenchMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_TailoringBenches</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_ElectricTailoringBenchMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_TailoringBenches</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_FueledSmithyMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Smithies</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_ElectricSmithyMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Smithies</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_ElectricStoveMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Stoves</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_FueledStoveMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Stoves</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_BreweryMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Brewers</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_TableStonecutterMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_StonecuttingTables</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_DrugLabMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_DrugLabs</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_ElectricSmelterMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_Smelters</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_SimpleResearchBenchMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_ResearchBenches</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                    <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_HiTechResearchBenchMini']</xpath>
                    <value>
                      <designatorDropdown>KobeRiddle_ResearchBenches</designatorDropdown>
                    </value>
                  </Operation>

                  <Operation Class="XmlExtensions.FindMod">
                    <mods>
                      <li>vanillaexpanded.vfeproduction</li>
                    </mods>
                    <packageId>True</packageId>
                    <caseTrue>

                      <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_VFE_TableButcherElectricMini']</xpath>
                        <value>
                          <designatorDropdown>KobeRiddle_ButcheringBenches</designatorDropdown>
                        </value>
                      </Operation>

                      <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_VFE_TableDrugLabElectricMini']</xpath>
                        <value>
                          <designatorDropdown>KobeRiddle_DrugLabs</designatorDropdown>
                        </value>
                      </Operation>

                      <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_VFE_FueledSmelterMini']</xpath>
                        <value>
                          <designatorDropdown>KobeRiddle_Smelters</designatorDropdown>
                        </value>
                      </Operation>

                      <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>/MiniWorkbench/ThingDef[defName = 'TWB_VFE_TableStonecutterElectricMini']</xpath>
                        <value>
                          <designatorDropdown>KobeRiddle_StonecuttingTables</designatorDropdown>
                        </value>
                      </Operation>

                    </caseTrue>
                  </Operation>
                </apply>
              </Operation>

              <Operation Class="XmlExtensions.MergeDocument">
                <docName>MiniWorkbench</docName>
              </Operation>

            </caseTrue>
          </Operation>

        </caseTrue>
      </Operation>

    </caseTrue>
  </Operation>
</Patch>